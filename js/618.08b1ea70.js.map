{"version":3,"file":"js/618.08b1ea70.js","mappings":"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","sources":["webpack://cft-test/./src/components/form-dynamic-builder/builder-col.vue","webpack://cft-test/./src/components/form-dynamic-builder/builder-col-component.vue","webpack://cft-test/./src/components/ui/ui-menu.vue","webpack://cft-test/src/components/ui/ui-menu.vue","webpack://cft-test/./src/components/ui/ui-menu.vue?93f4","webpack://cft-test/./src/components/ui/ui-menu.vue?59f4","webpack://cft-test/src/components/form-dynamic-builder/builder-col-component.vue","webpack://cft-test/./src/components/form-dynamic-builder/builder-col-component.vue?53c9","webpack://cft-test/./src/components/form-dynamic-builder/builder-col-component.vue?f551","webpack://cft-test/src/components/form-dynamic-builder/builder-col.vue","webpack://cft-test/./src/components/form-dynamic-builder/builder-col.vue?2b3f","webpack://cft-test/./src/components/form-dynamic-builder/builder-col.vue?a6d7"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{ref:\"rootEl\",staticClass:\"builder-col\",class:{ 'builder-col_column': !_vm.col.component && _vm.col.rows && _vm.col.rows.length },on:{\"click\":_vm.onClick,\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.onClick.apply(null, arguments)}}},[(!_vm.col.isFilled)?_c('span',{staticClass:\"builder-col__empty\"},[_vm._v(\"+\")]):_vm._e(),(_vm.col.component)?[_c('builder-col-component',{attrs:{\"row\":_vm.row,\"col\":_vm.col}})]:_vm._l((_vm.col.rows),function(_row){return _c('builder-row',{key:_row.id,attrs:{\"rowId\":_row.id}})}),(_vm.isRendered)?_c('ui-menu',{attrs:{\"rootEl\":_vm.rootEl,\"options\":_vm.menuOptions},on:{\"onInit\":_vm.onMenuInit,\"onSelect\":_vm.onSelect}}):_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{ref:\"rootEl\",staticClass:\"builder-col-component\",on:{\"click\":_vm.onClick,\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.onClick.apply(null, arguments)}}},[_vm._v(\" \"+_vm._s(this.col.component.name)+\" \"+_vm._s(_vm.id)+\" \"+_vm._s(_vm.title)+\" \"+_vm._s(_vm.name)+\" \"),_vm._l((_vm.col.rows),function(_row){return _c('builder-row',{key:_row.id,attrs:{\"rowId\":_row.id}})}),(_vm.isRendered)?_c('ui-menu',{attrs:{\"rootEl\":_vm.rootEl,\"options\":_vm.menuOptions},on:{\"onInit\":_vm.onMenuInit,\"onSelect\":_vm.onSelect}}):_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return (_vm.isMenuOpen)?_c('div',{staticClass:\"menu\",style:({ left: _vm.menuPosition.x + 'px', top: _vm.menuPosition.y + 'px' })},_vm._l((_vm.options),function(option){return _c('div',{key:option.id,staticClass:\"menu__option\",on:{\"click\":function($event){$event.stopPropagation();return _vm.onSelect(option)},\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.onSelect(option)}}},[_vm._v(\" \"+_vm._s(option.name)+\" \")])}),0):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"menu\"\n       v-if=\"isMenuOpen\"\n       :style=\"{ left: menuPosition.x + 'px', top: menuPosition.y + 'px' }\">\n    <div class=\"menu__option\"\n         v-for=\"option in options\"\n         :key=\"option.id\"\n         @click.stop=\"onSelect(option)\"\n         @keydown.enter=\"onSelect(option)\">\n      {{ option.name }}\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport Component            from 'vue-class-component';\nimport { Emit, Prop, Vue } from 'vue-property-decorator';\n\nexport type UiMenuPublicAPI = { open: (event: MouseEvent) => void };\nexport type UiMenuOption = {\n  id: string;\n  name: string;\n  value: string;\n};\n\n/**\n * Компонент должен управляться извне, через публичное API\n * Объект с API можно получить в обработчике, например:\n * <pre>\n *   <Parent>\n *     <UiMenu @onInit=\"onMenuInit(api)\">\n *   </Parent>\n * </pre>\n */\n@Component({\n  name: 'ui-menu',\n})\nexport default class UiMenu extends Vue {\n  /**\n   * (Emit) Компонент инициализирован, передача публичного API\n   */\n  @Emit('onInit') onInit() {\n    const api = {\n      open: this.open.bind(this),\n    };\n\n    return api;\n  }\n\n  /**\n   * Выбор элемента меню\n   * @param option\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  @Emit('onSelect') onSelect(option: UiMenuOption) {\n    this.close();\n  }\n\n  /**\n   * Корневой элемент\n   */\n  @Prop() rootEl!: HTMLElement;\n\n  /**\n   * Опции меню\n   */\n  @Prop() options!: UiMenuOption[];\n\n  /**\n   * Меню открыто?\n   */\n  isMenuOpen = false;\n\n  /**\n   * Позиция меню\n   */\n  menuPosition = {\n    x: 0,\n    y: 0,\n  };\n\n  /**\n   * (Handler) Скрытие меню по клику за пределами rootEl\n   * @param event\n   */\n  handleClickOutside(event: MouseEvent) {\n    const target = event?.target as HTMLElement | null;\n\n    if (target && this.rootEl) {\n      if (target !== this.rootEl) {\n        this.isMenuOpen = false;\n      }\n    }\n  }\n\n  /**\n   * (Hook) mounted\n   */\n  mounted() {\n    document.addEventListener('click', this.handleClickOutside.bind(this));\n    this.onInit();\n  }\n\n  /**\n   * (Hook) beforeDestroy\n   */\n  beforeDestroy() {\n    document.removeEventListener('click', this.handleClickOutside.bind(this));\n  }\n\n  /**\n   * Открытие меню\n   * @param event\n   */\n  open(event: MouseEvent) {\n    this.menuPosition.x = event.offsetX;\n    this.menuPosition.y = event.offsetY;\n    this.isMenuOpen     = true;\n  }\n\n  /**\n   * Закрытие меню\n   */\n  close() {\n    this.isMenuOpen = false;\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.menu {\n  position: absolute;\n  top: 0;\n  left: 0;\n  border-radius: 10px;\n  border: 1px solid #4ba0ff;\n  overflow: hidden;\n  z-index: 1;\n\n  &__option {\n    font-size: 14px;\n    font-weight: normal;\n    color: #515151;\n    padding: 5px 10px;\n    border-bottom: 1px solid #d3d3d3;\n    background: #f4f4f4;\n\n    &:hover {\n      background: #89d7ff;\n    }\n\n    &:last-child {\n      border-bottom: none;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ui-menu.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ui-menu.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./ui-menu.vue?vue&type=template&id=2a998e1f\"\nimport script from \"./ui-menu.vue?vue&type=script&lang=ts\"\nexport * from \"./ui-menu.vue?vue&type=script&lang=ts\"\nimport style0 from \"./ui-menu.vue?vue&type=style&index=0&id=2a998e1f&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"builder-col-component\" @click=\"onClick\" @keydown.enter=\"onClick\" ref=\"rootEl\">\n      {{this.col.component.name}} {{id}} {{title}} {{name}}\n\n      <builder-row v-for=\"_row in col.rows\" :key=\"_row.id\" :rowId=\"_row.id\"></builder-row>\n\n      <ui-menu v-if=\"isRendered\"\n               :rootEl=\"rootEl\"\n               :options=\"menuOptions\"\n               @onInit=\"onMenuInit\"\n               @onSelect=\"onSelect\">\n      </ui-menu>\n    </div>\n</template>\n\n<script lang=\"ts\">\nimport UiMenu, { UiMenuOption, UiMenuPublicAPI } from '@/components/ui/ui-menu.vue';\nimport Col                                       from '@/models/Col';\nimport { DynamicComponentSetting }               from '@/models/components/BaseDynamicComponent';\nimport Row                                       from '@/models/Row';\nimport { useRepo }                               from 'pinia-orm';\nimport Component                                 from 'vue-class-component';\nimport { Prop, Ref, Vue }                        from 'vue-property-decorator';\n\n@Component({\n  name:       'builder-col',\n  components: {\n    // Динамический импорт необходим, чтобы избежать циклической зависимости\n    BuilderRow: () => import('./builder-row.vue'),\n    UiMenu,\n  },\n})\nexport default class BuilderCol extends Vue {\n  /**\n   * Строка\n   */\n  @Prop() row!: Row;\n\n  /**\n   * Колонка\n   */\n  @Prop() col!: Col;\n\n  /**\n   * Корневой элемент\n   */\n  @Ref('rootEl') readonly rootEl!: HTMLElement;\n\n  /**\n   * Компонент добавлен?\n   */\n  isRendered = false;\n\n  /**\n   * Публичный апи компонента UiMenu\n   * @private\n   */\n  private menuApi!: UiMenuPublicAPI;\n\n  /**\n   * Опции для компонента UiMenu\n   */\n  get menuOptions() {\n    const options = [\n      { id: 1, name: 'Строка', value: 'row' },\n      { id: 4, name: 'Настроить компонент', value: 'settings' },\n    ];\n\n    return options;\n  }\n\n  get settings() {\n    return this.col.component.props.settings;\n  }\n\n  /**\n   * (HTML атрибут) ID\n   */\n  get id() {\n    const setting = this.settings.find((item) => item.name === 'id') as DynamicComponentSetting;\n    return setting ? `id=(${setting.value})` : '';\n  }\n\n  /**\n   * (HTML атрибут) title\n   */\n  get title() {\n    const setting = this.settings.find((item) => item.name === 'title') as DynamicComponentSetting;\n    return setting ? `(title=${setting.value})` : '';\n  }\n\n  /**\n   * (HTML атрибут) title\n   */\n  get name() {\n    const setting = this.settings.find((item) => item.name === 'name') as DynamicComponentSetting;\n    return setting ? `(name=${setting.value})` : '';\n  }\n\n  /**\n   * (Hook) mounted\n   */\n  mounted() {\n    this.isRendered = true;\n  }\n\n  /**\n   * Клик по корневому элементу\n   * @param event\n   */\n  onClick(event: MouseEvent) {\n    this.menuApi.open(event);\n  }\n\n  /**\n   * Инициализация api компонента UiMenu\n   * @param api\n   */\n  onMenuInit(api: UiMenuPublicAPI) {\n    this.menuApi = api;\n  }\n\n  /**\n   * (Handler) Выбор элемента меню\n   * @param option\n   */\n  onSelect(option: UiMenuOption) {\n    // Добавление строки <slot> компонента\n    if (option.value === 'row') {\n      const rowRepo = useRepo(Row);\n      const row = rowRepo.save({\n        colId: this.col.id,\n        cols:  [],\n      });\n\n      useRepo(Col)\n        .save({\n          rowId:         row.id,\n          componentName: '',\n          rows:          [],\n        });\n\n    // Переход к настройкам компонента\n    } else if (option.value === 'settings') {\n      this.$router.push({ name: 'colEdit', params: { colId: this.col.id } }).then(() => {\n        this.$router.push({ name: 'componentEdit', params: { componentId: this.col.componentId } });\n      });\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.orm-id {\n  position: absolute;\n  left: 0;\n  top: 0;\n  font-size: 10px;\n  color: black;\n}\n.builder-col-component {\n  position: relative;\n  color: #00c15b;\n  margin: 15px;\n  border: 2px dashed #00c15b;\n  border-radius: 5px;\n  min-height: 50px;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  justify-content: center;\n  cursor: pointer;\n  flex: 1;\n\n  &:hover {\n    background: rgb(137, 255, 196);\n  }\n\n  &:hover &__empty {\n    color: white;\n  }\n\n  &__empty {\n    font-size: 22px;\n    font-weight: bold;\n  }\n\n  &__component {\n    border: 1px solid darkgray;\n    border-radius: 5px;\n    background-color: #e8e8e8;\n    margin: 10px;\n    padding: 2px 10px;\n  }\n}\n\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./builder-col-component.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./builder-col-component.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./builder-col-component.vue?vue&type=template&id=5ad2a9b2\"\nimport script from \"./builder-col-component.vue?vue&type=script&lang=ts\"\nexport * from \"./builder-col-component.vue?vue&type=script&lang=ts\"\nimport style0 from \"./builder-col-component.vue?vue&type=style&index=0&id=5ad2a9b2&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"builder-col\"\n       :class=\"{ 'builder-col_column': !col.component && col.rows && col.rows.length }\"\n       @click=\"onClick\"\n       @keydown.enter=\"onClick\"\n       ref=\"rootEl\">\n\n<!--    <div class=\"orm-id\">-->\n<!--      {{col.id}}-->\n<!--    </div>-->\n    <span class=\"builder-col__empty\" v-if=\"!col.isFilled\">+</span>\n\n    <template v-if=\"col.component\">\n      <builder-col-component :row=\"row\" :col=\"col\"></builder-col-component>\n    </template>\n    <template v-else>\n      <builder-row v-for=\"_row in col.rows\" :key=\"_row.id\" :rowId=\"_row.id\"></builder-row>\n    </template>\n\n    <ui-menu v-if=\"isRendered\"\n            :rootEl=\"rootEl\"\n            :options=\"menuOptions\"\n            @onInit=\"onMenuInit\"\n            @onSelect=\"onSelect\">\n    </ui-menu>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport BuilderColComponent                       from '@/components/form-dynamic-builder/builder-col-component.vue';\nimport UiMenu, { UiMenuOption, UiMenuPublicAPI } from '@/components/ui/ui-menu.vue';\nimport Col                                       from '@/models/Col';\nimport Row                                       from '@/models/Row';\nimport { useRepo }                               from 'pinia-orm';\nimport Component                                 from 'vue-class-component';\nimport {\n  Inject, Prop, Ref, Vue,\n}               from 'vue-property-decorator';\n\n@Component({\n  name:       'builder-col',\n  components: {\n    UiMenu,\n    // Динамический импорт необходим, чтобы избежать циклической зависимости\n    BuilderRow: () => import('./builder-row.vue'),\n    BuilderColComponent,\n  },\n})\nexport default class BuilderCol extends Vue {\n  /**\n   * EventBus для сообщения между компонентами\n   */\n  @Inject('fdb-event-bus') fdbEventBus!: Vue;\n\n  /**\n   * Строка\n   */\n  @Prop() row!: Row;\n\n  /**\n   * ID колонки\n   */\n  @Prop() colId!: string;\n\n  /**\n   * Корневой элемент\n   */\n  @Ref('rootEl') readonly rootEl!: HTMLElement;\n\n  /**\n   * Колонка\n   */\n  get col() {\n    return useRepo(Col).with('rows').with('component').find(this.colId) || new Col();\n  }\n\n  /**\n   * Компонент добавлен?\n   */\n  isRendered = false;\n\n  /**\n   * Публичный апи компонента UiMenu\n   * @private\n   */\n  private menuApi!: UiMenuPublicAPI;\n\n  /**\n   * Опции для компонента UiMenu\n   */\n  get menuOptions() {\n    const options = [\n      { id: 2, name: 'Колонка', value: 'col' },\n      { id: 3, name: 'Компонент', value: 'component' },\n      { id: 4, name: 'Настроить', value: 'col-settings' },\n      { id: 5, name: 'Удалить', value: 'delete' },\n    ];\n\n    if (!this.col.component) {\n      options.push({ id: 1, name: 'Строка', value: 'row' });\n    }\n\n    return options;\n  }\n\n  /**\n   * (Hook) mounted\n   */\n  mounted() {\n    this.isRendered = true;\n  }\n\n  /**\n   * Клик по корневому элементу\n   * @param event\n   */\n  onClick(event: MouseEvent) {\n    this.menuApi.open(event);\n  }\n\n  /**\n   * Инициализация api компонента UiMenu\n   * @param api\n   */\n  onMenuInit(api: UiMenuPublicAPI) {\n    this.menuApi = api;\n  }\n\n  /**\n   * (Handler) Выбор элемента меню\n   * @param option\n   */\n  onSelect(option: UiMenuOption) {\n    // Добавление строки\n    if (option.value === 'row') {\n      const rowRepo = useRepo(Row);\n      const row     = rowRepo.save({\n        colId: this.col.id,\n        cols:  [],\n      });\n\n      useRepo(Col)\n        .save({\n          rowId: row.id,\n          rows:  [],\n        });\n\n    // Добавление колонки\n    } else if (option.value === 'col') {\n      useRepo(Col).save({\n        rowId: this.row.id,\n        rows:  [],\n      });\n\n      this.fdbEventBus.$emit('update-form');\n\n    // Переход к настройкам колонки\n    } else if (option.value === 'col-settings') {\n      this.$router.push({ name: 'colEdit', params: { colId: this.col.id } });\n\n    // Переход к настройкам компонента\n    } else if (option.value === 'component') {\n      this.$router.push({ name: 'colEdit', params: { colId: this.col.id } }).then(() => {\n        this.$router.push({ name: 'componentNew' });\n      });\n\n    // Удаление колонки\n    } else if (option.value === 'delete') {\n      useRepo(Col).destroy(this.col.id);\n\n      // Удаление строки если колонка одна\n      if (this.row.cols.length === 1) {\n        useRepo(Row).destroy(this.row.id);\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.orm-id {\n  position: absolute;\n  left: 0;\n  top: 0;\n  font-size: 10px;\n  color: black;\n}\n.builder-col {\n  position: relative;\n  color: blue;\n  margin: 15px;\n  border: 2px dashed blue;\n  border-radius: 5px;\n  min-height: 50px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  flex: 1;\n\n  &:hover {\n    background: rgba(151, 198, 255, 0.6);\n  }\n\n  &:hover > &__empty {\n    color: white;\n  }\n\n  &_column {\n    flex-direction: column;\n    align-items: stretch;\n  }\n\n  &__empty {\n    font-size: 22px;\n    font-weight: bold;\n  }\n\n  &__component {\n    border: 1px solid darkgray;\n    border-radius: 5px;\n    background-color: #e8e8e8;\n    margin: 10px;\n    padding: 2px 10px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./builder-col.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./builder-col.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./builder-col.vue?vue&type=template&id=a30c3a3a\"\nimport script from \"./builder-col.vue?vue&type=script&lang=ts\"\nexport * from \"./builder-col.vue?vue&type=script&lang=ts\"\nimport style0 from \"./builder-col.vue?vue&type=style&index=0&id=a30c3a3a&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","_setupProxy","ref","staticClass","class","col","component","rows","length","on","onClick","$event","type","indexOf","_k","keyCode","key","apply","arguments","isFilled","_e","_v","attrs","row","_l","_row","id","isRendered","rootEl","menuOptions","onMenuInit","onSelect","staticRenderFns","_s","name","title","isMenuOpen","style","left","menuPosition","x","top","y","options","option","stopPropagation","UiMenu","Vue","constructor","args","_defineProperty","onInit","api","open","bind","close","handleClickOutside","event","target","mounted","document","addEventListener","beforeDestroy","removeEventListener","offsetX","offsetY","__decorate","Emit","Prop","Component","BuilderCol","value","settings","props","setting","find","item","menuApi","rowRepo","useRepo","Row","save","colId","cols","Col","rowId","componentName","$router","push","params","then","componentId","Ref","components","BuilderRow","with","fdbEventBus","$emit","destroy","Inject","BuilderColComponent"],"sourceRoot":""}